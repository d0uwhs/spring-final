<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.minjun.springfinal.mapper.MemberMapper">

    <resultMap id="memberMap" type="com.minjun.springfinal.dto.Member">
        <result column="username" property="username"/>
        <result column="password" property="password"/>
        <result column="name" property="name"/>
        <collection property="roles" column="role" resultMap="memberMap"/>
    </resultMap>

    <resultMap id="rolesMap" type="String">
        <result column="roles" property="roles"
    </resultMap>

    <select id="findByUsername" resultType="com.minjun.springfinal.dto.Member">
        SELECT user_id, username, password, role_no, role_name
    </select>

    <insert id="insertAll">

    </insert>

    <!--    회원을 등록합니다.-->
    <insert id="insertMember">
        INSERT INTO members (username, password, name)
        VALUES (#{username}, #{password}, #{name})
    </insert>
    <insert id="insertRoles">
        INSERT INTO members_roles(user_id, role_no)
        VALUES (#{userId}, #{roleNo})
    </insert>
</mapper>